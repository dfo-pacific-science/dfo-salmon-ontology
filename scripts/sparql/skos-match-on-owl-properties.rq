PREFIX gcdfo: <https://w3id.org/gcdfo/salmon#>
PREFIX owl: <http://www.w3.org/2002/07/owl#>
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX skos: <http://www.w3.org/2004/02/skos/core#>

# Alpha 0.0.6 migration lint:
# Prevent skos:*Match mappings on OWL/RDF properties.
# Propertyâ†”property mappings should use property semantics (e.g.,
# rdfs:subPropertyOf / owl:equivalentProperty), not SKOS mapping predicates.
#
# The query is intentionally dormant until alpha refactor markers are present.
SELECT DISTINCT ?term ?termType ?matchPredicate ?matchedTerm ?matchedType
WHERE {
  FILTER EXISTS {
    { gcdfo:iadoptEntity a owl:AnnotationProperty . }
    UNION
    { gcdfo:YearBasisScheme a skos:ConceptScheme . }
  }

  VALUES ?matchPredicate {
    skos:exactMatch
    skos:closeMatch
    skos:broadMatch
    skos:narrowMatch
    skos:relatedMatch
  }

  ?term ?matchPredicate ?matchedTerm .

  OPTIONAL {
    ?term a ?termType .
    FILTER(?termType IN (owl:ObjectProperty, owl:DatatypeProperty, owl:AnnotationProperty, rdf:Property))
  }
  OPTIONAL {
    ?matchedTerm a ?matchedType .
    FILTER(?matchedType IN (owl:ObjectProperty, owl:DatatypeProperty, owl:AnnotationProperty, rdf:Property))
  }

  FILTER(BOUND(?termType) || BOUND(?matchedType))
}
ORDER BY ?term ?matchPredicate ?matchedTerm
