# Alpha 0.0.6 Hardening — Second-Pass Coherence Sweep (2026-02-25)

## Scope

Second-pass review for drift/foot-guns across:

- `docs/CONVENTIONS.md` vs implementation
- ontology modules vs canonical ontology
- CI workflow assumptions vs Makefile/toolchain behavior
- stale/deprecated docs references

## High-Impact Fixes Applied

1. **Docs drift correction (term-table flow + entrypoints)**
   - `docs/entrypoints.md` now treats `make docs-refresh`/`make ci` as canonical and marks `extract-term-tables.py` as deprecated local-only utility.
   - `docs/todo_list.md` term-table automation section converted to explicit deprecated status.
   - `README.md` clarified canonical publishing vs deprecated local term-table flow.

2. **CI/Make reliability hardening**
   - `.github/workflows/ci.yml` updated from Java 11 to **Java 17** (matches WIDOCO JDK-17 artifact).
   - Removed dead `.PHONY` entries in `Makefile` (`publish-clean`, `dsu-sync-term-tables`, `dsu-sync-and-stage`).
   - Added `make ci-sync-artifacts` helper target to run CI and stage generated docs artifacts (`docs/gcdfo.{ttl,owl,jsonld}`, `docs/index*.html`).

3. **Regression guardrails extended**
   - Added `scripts/sparql/no-legacy-variablehas.rq`.
   - Wired into `scripts/run-sparql-lint.sh` to block legacy `gcdfo:variableHas*` reintroduction.
   - Updated `docs/ROBOT_SETUP.md` lint list.

4. **Upper-level module coherence cleanup**
   - `ontology/modules/upper-level-view.ttl` now explicitly marked as visualization/alignment aid (non-canonical).
   - Removed legacy `variableHas*` object-property declarations from module.
   - Removed property-level `skos:closeMatch` on OWL properties (`observationUsedProcedure`, `samplingUsedProcedure`).
   - Aligned observation restriction to `sosa:observedProperty some iop:Variable`.

## Remaining Risks / Follow-ups

1. **Generated docs drift remains possible by design** (CI regenerates docs and enforces clean git state). `make ci-sync-artifacts` reduces friction but does not auto-commit.
2. **Upper-level module is still conceptual** and intentionally may not mirror every canonical modeling detail; keep this explicit in contributor docs if confusion persists.
3. **No forced migration of historical release snapshots** (`docs/releases/*`) was performed; these remain immutable by policy.

## Coherence Status (post-fix)

- **Conventions ↔ canonical ontology:** high coherence
- **CI/CD + generation workflow:** reliable with reduced foot-guns
- **Docs ↔ actual behavior:** significantly improved
- **Overall readiness:** suitable for continued alpha integration review
