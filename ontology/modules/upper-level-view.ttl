@prefix :        <https://w3id.org/gcdfo/salmon/modules/salmon-data-metamodel#> .
@prefix owl:     <http://www.w3.org/2002/07/owl#> .
@prefix rdf:     <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs:    <http://www.w3.org/2000/01/rdf-schema#> .
@prefix skos:    <http://www.w3.org/2004/02/skos/core#> .
@prefix prov:    <http://www.w3.org/ns/prov#> .
@prefix sosa:    <http://www.w3.org/ns/sosa/> .
@prefix iop:     <https://w3id.org/iadopt/ont/> .
@prefix dwc:     <http://rs.tdwg.org/dwc/terms/> .
@prefix dwcdp:   <https://rs.tdwg.org/dwc/dp/terms/> .
@prefix bfo:     <http://purl.obolibrary.org/obo/BFO_> .
@prefix iao:     <http://purl.obolibrary.org/obo/IAO_> .

<https://w3id.org/gcdfo/salmon/modules/salmon-data-metamodel> a owl:Ontology ;
  rdfs:label "Salmon Data Metamodel (upper-level alignment view)"@en ;
  rdfs:comment "Standalone OWL alignment view focused on SOSA + I-ADOPT + PROV, with DwC/DwC-DP kept as reference mappings. This module is a visualization/alignment aid and is not the canonical authoring source (canonical source is ontology/dfo-salmon.ttl + docs/CONVENTIONS.md)."@en .

#################################################################
# Upper-level anchors (optional but explicit)
#################################################################

sosa:Observation rdfs:subClassOf bfo:0000015, prov:Activity .
sosa:Sampling rdfs:subClassOf bfo:0000015, prov:Activity .
sosa:Sample rdfs:subClassOf bfo:0000040, prov:Entity .
sosa:Result rdfs:subClassOf prov:Entity .

iop:Variable rdfs:subClassOf iao:0000030, sosa:Property .
iop:Constraint rdfs:subClassOf iao:0000030 .
iop:Property rdfs:subClassOf iao:0000030 .

#################################################################
# Core SOSAâ€“I-ADOPT bridge classes (OWL restrictions)
#################################################################

:SalmonDataObservation a owl:Class ;
  rdfs:label "Salmon data observation"@en ;
  rdfs:subClassOf sosa:Observation ,
    [ a owl:Restriction ; owl:onProperty sosa:hasFeatureOfInterest ; owl:someValuesFrom iop:Entity ] ,
    [ a owl:Restriction ; owl:onProperty sosa:observedProperty ; owl:someValuesFrom iop:Variable ] ,
    [ a owl:Restriction ; owl:onProperty sosa:hasResult ; owl:someValuesFrom sosa:Result ] ,
    [ a owl:Restriction ; owl:onProperty :hasVariable ; owl:someValuesFrom iop:Variable ] .

:SalmonDataSampling a owl:Class ;
  rdfs:label "Salmon data sampling"@en ;
  rdfs:subClassOf sosa:Sampling ,
    [ a owl:Restriction ; owl:onProperty sosa:hasFeatureOfInterest ; owl:someValuesFrom iop:Entity ] ,
    [ a owl:Restriction ; owl:onProperty sosa:hasResult ; owl:someValuesFrom sosa:Sample ] .

#################################################################
# Bridge object properties (OWL object properties, not annotations)
#################################################################

:hasVariable a owl:ObjectProperty ;
  rdfs:label "has variable"@en ;
  rdfs:domain sosa:Observation ;
  rdfs:range iop:Variable ;
  rdfs:comment "Links a SOSA observation to an I-ADOPT variable decomposition used in salmon data workflows. In SDP workflows this is typically represented as a compound term concept with decomposition annotations."@en .

:constraintConstrains a owl:ObjectProperty ;
  rdfs:label "constraint constrains"@en ;
  rdfs:subPropertyOf iop:constrains ;
  rdfs:domain iop:Constraint ;
  rdfs:range owl:Thing .

:observationUsedFeature a owl:ObjectProperty ;
  rdfs:label "observation used feature"@en ;
  rdfs:subPropertyOf sosa:hasFeatureOfInterest , prov:used ;
  rdfs:domain sosa:Observation ;
  rdfs:range sosa:FeatureOfInterest .

:observationGeneratedResult a owl:ObjectProperty ;
  rdfs:label "observation generated result"@en ;
  rdfs:subPropertyOf sosa:hasResult , prov:generated ;
  rdfs:domain sosa:Observation ;
  rdfs:range sosa:Result .

:samplingGeneratedSample a owl:ObjectProperty ;
  rdfs:label "sampling generated sample"@en ;
  rdfs:subPropertyOf sosa:hasResult , prov:generated ;
  rdfs:domain sosa:Sampling ;
  rdfs:range sosa:Sample .

:samplingMadeBySampler a owl:ObjectProperty ;
  rdfs:label "sampling made by sampler"@en ;
  rdfs:subPropertyOf sosa:madeBySampler ;
  rdfs:domain sosa:Sampling ;
  rdfs:range sosa:Sampler .

:observationUsedProcedure a owl:ObjectProperty ;
  rdfs:label "observation used procedure"@en ;
  rdfs:subPropertyOf sosa:usedProcedure ;
  rdfs:domain sosa:Observation ;
  rdfs:range sosa:Procedure .

:samplingUsedProcedure a owl:ObjectProperty ;
  rdfs:label "sampling used procedure"@en ;
  rdfs:subPropertyOf sosa:usedProcedure ;
  rdfs:domain sosa:Sampling ;
  rdfs:range sosa:Procedure .

#################################################################
# Reference SOSA -> PROV alignment links (module-only view)
#################################################################

sosa:hasFeatureOfInterest rdfs:subPropertyOf prov:used .
sosa:hasResult rdfs:subPropertyOf prov:generated .
sosa:isSampleOf rdfs:subPropertyOf prov:wasDerivedFrom .

#################################################################
# Conceptual crosswalks (non-logical links)
#################################################################

sosa:FeatureOfInterest skos:closeMatch iop:Entity .
sosa:Property skos:closeMatch iop:Property .
iop:Variable skos:closeMatch sosa:Property .

# DwC / DwC-DP are treated as reference mappings (not strict equivalence axioms)
sosa:Sampling skos:closeMatch dwc:Event .
sosa:Observation skos:closeMatch dwc:Occurrence .
sosa:Sample skos:closeMatch dwc:MaterialEntity .
sosa:Procedure skos:closeMatch dwcdp:Protocol .

#################################################################
# Survey/event structure hints (still non-strict)
#################################################################

dwcdp:Event a owl:Class ;
  rdfs:subClassOf prov:Activity ;
  rdfs:label "DwC-DP Event"@en .

dwcdp:Survey a owl:Class ;
  rdfs:subClassOf prov:Activity ;
  rdfs:label "DwC-DP Survey"@en .

dwcdp:Occurrence a owl:Class ;
  rdfs:subClassOf prov:Activity ;
  rdfs:label "DwC-DP Occurrence"@en .

dwcdp:MaterialEntity a owl:Class ;
  rdfs:subClassOf prov:Entity ;
  rdfs:label "DwC-DP MaterialEntity"@en .

dwcdp:Organism a owl:Class ;
  rdfs:subClassOf prov:Entity ;
  rdfs:label "DwC-DP Organism"@en .

dwcdp:Protocol a owl:Class ;
  rdfs:subClassOf prov:Plan ;
  rdfs:label "DwC-DP Protocol"@en .

:partOfSurvey a owl:ObjectProperty ;
  rdfs:label "part of survey"@en ;
  rdfs:domain sosa:Sampling ;
  rdfs:range dwcdp:Survey ;
  rdfs:comment "Use this (or a BFO part-of relation) to group many sampling acts under a survey/campaign activity."@en .

:dwcdpEventID a owl:ObjectProperty ;
  rdfs:label "eventID (happened during)"@en ;
  rdfs:domain owl:Thing ;
  rdfs:range dwcdp:Event ;
  rdfs:comment "Reference-style linkage used in DwC-DP rows (e.g., Survey/Occurrence/MaterialEntity to Event)."@en .

:dwcdpParentEventID a owl:ObjectProperty ;
  rdfs:label "parentEventID (happened during)"@en ;
  rdfs:domain dwcdp:Event ;
  rdfs:range dwcdp:Event ;
  rdfs:comment "Event hierarchy parent-child linkage in DwC-DP."@en .

:dwcdpSamplingEffortProtocolID a owl:ObjectProperty ;
  rdfs:label "samplingEffortProtocolID (followed)"@en ;
  rdfs:domain dwcdp:Survey ;
  rdfs:range dwcdp:Protocol .

:dwcdpOrganismID a owl:ObjectProperty ;
  rdfs:label "organismID (of an)"@en ;
  rdfs:domain dwcdp:Occurrence ;
  rdfs:range dwcdp:Organism .

# Reference pattern triples from DwC-DP quick-reference style

dwcdp:Survey :dwcdpEventID dwcdp:Event .
dwcdp:Occurrence :dwcdpEventID dwcdp:Event .
dwcdp:MaterialEntity :dwcdpEventID dwcdp:Event .
dwcdp:Event :dwcdpParentEventID dwcdp:Event .
dwcdp:Survey :dwcdpSamplingEffortProtocolID dwcdp:Protocol .
dwcdp:Occurrence :dwcdpOrganismID dwcdp:Organism .