shell=${SHELL##*/}; case "$shell" in bash|zsh|fish|nu) ;; *) shell=bash ;; esac

if command -v devenv >/dev/null 2>&1; then
  if env_out=$(devenv print-dev-env --shell "$shell" 2>/dev/null); then
    eval "$env_out"
  else
    eval "$(devenv print-dev-env)"
  fi
else
  echo "devenv not found; install with: nix profile install nixpkgs#devenv"
fi


